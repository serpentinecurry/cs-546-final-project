<style>
  .course-card {
    border: none;
    border-radius: 16px;
    transition: transform 0.2s ease, box-shadow 0.2s ease;
  }

  .course-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 6px 20px rgba(0, 0, 0, 0.1);
  }

  .search-wrapper {
    border-radius: 50px;
    background-color: #fff;
  }

  .search-input {
    border: none;
    font-size: 1.1rem;
    padding-left: 0.75rem;
    box-shadow: none;
  }

  .search-input:focus {
    box-shadow: none;
    outline: none;
  }

  .search-icon {
    font-size: 1.5rem;
    color: #6c757d;
  }

  .badge-full {
    background-color: #ff4d4f;
  }

  .badge-applied {
    background-color: #adb5bd;
  }

  .course-header {
    font-size: 1.3rem;
    font-weight: 600;
    color: #0d6efd;
  }

  .course-meta {
    font-size: 0.95rem;
    color: #6c757d;
  }

  .course-enroll-count {
    font-weight: 500;
    font-size: 1rem;
  }
</style>

<div class="container py-4">
  <h2 class="text-center mb-4 text-primary fw-bold display-6">
    <i class="bi bi-journals me-2"></i> All Available Courses
  </h2>

  {{#if successMessage}}
    <div class="alert alert-success alert-dismissible fade show w-75 mx-auto text-center" role="alert">
      {{successMessage}}
    </div>
  {{/if}}

  <!-- ğŸ” Search Bar -->
  <form method="GET" action="/student/all-courses" class="w-75 mx-auto mb-5">
    <div class="input-group shadow-sm search-wrapper p-2">
      <span class="input-group-text bg-transparent border-0 search-icon">ğŸ”</span>
      <input
        type="text"
        name="search"
        class="form-control search-input"
        placeholder="Search by course name or code..."
        value="{{searchQuery}}"
        aria-label="Search Courses"
      />
      <button class="btn btn-outline-primary px-4" type="submit">Search</button>

      {{#if searchQuery}}
        <a href="/student/all-courses" class="btn btn-outline-danger px-4">Clear</a>
      {{/if}}
    </div>
  </form>

  <!-- âš ï¸ Error -->
  {{#if error}}
    <div class="alert alert-danger text-center fs-6 w-75 mx-auto">
      âš ï¸ {{error}}
    </div>
  {{/if}}

  <!-- ğŸ“‹ Course Grid -->
  {{#if courses.length}}
    <div class="row g-4">
      {{#each courses}}
        <div class="col-md-6 col-lg-4">
          <div class="card course-card p-4 h-100 shadow-sm bg-white">
            <h5 class="course-header mb-2">ğŸ“– {{this.courseName}}</h5>
            <p class="course-meta mb-1">ğŸ†” {{this.courseCode}}</p>

            {{#if this.professor}}
              <p class="course-meta mb-1">
                ğŸ‘¨â€ğŸ« {{this.professor.firstName}} {{this.professor.lastName}}
              </p>
            {{else}}
              <p class="course-meta fst-italic mb-1">No professor assigned</p>
            {{/if}}

            <p class="mt-2 mb-3 text-dark course-enroll-count">
              ğŸ‘¥ Enrolled: <strong>{{this.activeCount}}</strong> / {{this.maxLimit}}
            </p>

            {{#if this.alreadyApplied}}
              <span class="badge badge-applied text-light py-2 px-3 w-100 text-center rounded-pill">
                â³ Already Applied to Enroll
              </span>

            {{else if this.isCourseFull}}
              <span class="badge badge-full text-light py-2 px-3 w-100 text-center rounded-pill">
                âŒ Course Full
              </span>

            {{else}}
              <form method="POST" action="/student/enroll/{{this._id}}">
                <button type="submit" class="btn btn-primary w-100 rounded-pill">
                  ğŸ“¥ Apply to Enroll
                </button>
              </form>
            {{/if}}
          </div>
        </div>
      {{/each}}
    </div>
  {{else}}
    <p class="text-center text-muted fs-5 mt-5">ğŸš« No courses available.</p>
  {{/if}}
</div>
