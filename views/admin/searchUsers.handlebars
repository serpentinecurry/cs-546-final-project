<h1 class="text-center mb-4">🔎 Search Users</h1>

<form method="GET" action="/admin/searchUsers" class="card p-4 shadow-sm mb-4">

  <div class="mb-3">
    <label for="searchTerm" class="form-label">Search by Name or Email</label>
    <input type="text" name="searchTerm" id="searchTerm" class="form-control" value="{{searchTerm}}">
  </div>

  <div class="mb-3">
    <label for="role" class="form-label">Filter by Role</label>
    <select name="role" id="role" class="form-select">
      <option value="all" {{#if (eq role 'all')}}selected{{/if}}>All Roles</option>
      <option value="student" {{#if (eq role 'student')}}selected{{/if}}>Student</option>
      <option value="ta" {{#if (eq role 'ta')}}selected{{/if}}>TA</option>
      <option value="professor" {{#if (eq role 'professor')}}selected{{/if}}>Professor</option>
    </select>
  </div>

  <div class="text-center">
    <button type="submit" class="btn btn-primary">🔍 Search</button>
  </div>
</form>

{{#if users.length}}
  <div class="list-group mb-4">
    {{#each users}}
      <a href="/admin/user/{{this._id}}" class="list-group-item list-group-item-action">
        <strong>{{this.firstName}} {{this.lastName}}</strong> — {{this.role}} — {{this.email}}
      </a>
    {{/each}}
  </div>
{{else}}
  <p class="text-center">No users found matching your search.</p>
{{/if}}

<div class="text-center">
  <a href="/admin" class="btn btn-secondary">⬅️ Back to Admin Dashboard</a>
</div>
