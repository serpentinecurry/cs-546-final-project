<h1 class="text-center mb-4">👤 User Profile</h1>

<div class="card p-4 shadow-sm mb-4">
  <p><strong>Name:</strong> {{user.firstName}} {{user.lastName}}</p>
  <p><strong>Email:</strong> {{user.email}}</p>
  {{#if (eq user.role "student")}}
    <p><strong>Major:</strong> {{user.major}}</p>
    <p><strong>Courses enrolled:</strong> {{user.enrolledCourses}}</p>
  {{/if}}
  <p><strong>Role:</strong> {{user.role}}</p>
  <p><strong>Age:</strong> {{user.age}}</p>
  <p><strong>Gender:</strong> {{user.gender}}</p>
  <p><strong>User created signup request at:</strong> {{user.userCreatedAt}}</p>
</div>

<div class="d-flex justify-content-center flex-wrap gap-2 mb-4">
  {{#if (eq user.accessStatus "Pending")}}
    <form method="POST" action="/admin/approve/{{user._id}}" class="d-inline">
      <button type="submit" class="btn btn-success">✅ Approve</button>
    </form>
    <form method="POST" action="/admin/reject/{{user._id}}" class="d-inline">
      <button type="submit" class="btn btn-danger">❌ Reject</button>
    </form>
  {{/if}}

  {{#if (eq user.accessStatus "Rejected")}}
    <form method="POST" action="/admin/approve/{{user._id}}" class="d-inline">
      <button type="submit" class="btn btn-success">✅ Approve</button>
    </form>
    <form
      method="POST"
      action="/admin/delete/{{user._id}}"
      class="d-inline"
      onsubmit="return confirm('⚠️ Are you sure you want to delete this user? This action cannot be undone!');"
    >
      <button type="submit" class="btn btn-danger">🗑️ Delete User</button>
    </form>
  {{/if}}

  {{#if (eq user.accessStatus "approved")}}
    <form method="POST" action="/admin/reject/{{user._id}}" class="d-inline">
      <button type="submit" class="btn btn-danger">❌ Reject</button>
    </form>
    {{#if (eq user.role "student")}}
      <form method="POST" action="/admin/promote/{{user._id}}" class="d-inline">
        <button type="submit" class="btn btn-warning text-white">🎓 Promote to
          TA</button>
      </form>
    {{/if}}

    {{#if (eq user.role "ta")}}
      <form method="POST" action="/admin/demote/{{user._id}}" class="d-inline">
        <button type="submit" class="btn btn-secondary">⬇️ Demote to Student</button>
      </form>
    {{/if}}
  {{/if}}
</div>

<div class="text-center">
  <a href="/admin" class="btn btn-secondary">⬅️ Back to Admin Dashboard</a>
</div>