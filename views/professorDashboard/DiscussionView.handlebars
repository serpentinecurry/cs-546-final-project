<div class="container">
  {{#if successMessage}}
    <div class="alert alert-success">
      {{successMessage}}
      <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
    </div>
  {{/if}}

  <div class="card mb-3">
    <div class="card-header bg-primary text-white">
      <h1 class="h4">{{discussion.postTitle}}</h1>
      <small>Posted by {{discussion.authorName}} on {{discussion.createdAt}}</small>
    </div>
    <div class="card-body">
      {{discussion.postContent}}
    </div>
  </div>
  
  <h2 class="h5">Comments ({{discussion.comments.length}})</h2>
  
  {{#if discussion.comments.length}}
    {{#each discussion.comments}}
      <div class="card mb-2">
        <div class="card-body">
          <p>{{this.commentText}}</p>
          <small class="text-muted">- {{this.commenterName}} | {{this.timestamp}}</small>
        </div>
      </div>
    {{/each}}
  {{else}}
    <p class="alert alert-info">No comments yet. Be the first to comment!</p>
  {{/if}}
  
  <form method="POST" action="/professor/course/{{course._id}}/lecture/{{lecture._id}}/discussions/{{discussion._id}}" class="mt-3">
    <label for="commentText">Your Comment</label>
    <textarea id="commentText" name="commentText" class="form-control mb-2" rows="3" required></textarea>
    
    <div class="form-check mb-2">
      <input type="checkbox" id="isAnonymous" name="isAnonymous" class="form-check-input">
      <label for="isAnonymous">Post anonymously</label>
    </div>
    
    <div class="d-flex justify-content-between">
      <a href="/professor/course/{{course._id}}/lecture/{{lecture._id}}" class="btn btn-outline-secondary">Back</a>
      <button type="submit" class="btn btn-primary">Post Comment</button>
    </div>
  </form>
</div>